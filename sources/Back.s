; Back.s : 背景
;


; モジュール宣言
;
    .module Back

; 参照ファイル
;
    .include    "bios.inc"
    .include    "vdp.inc"
    .include    "System.inc"
    .include    "Sound.inc"
    .include    "Code.inc"
    .include    "App.inc"
    .include    "Game.inc"
    .include    "Value.inc"
    .include	"Back.inc"

; 外部変数宣言
;
    .globl  _patternTable

; マクロの定義
;


; CODE 領域
;
    .area   _CODE

; 背景を初期化する
;
_BackInitialize::
    
    ; レジスタの保存
    
    ; 背景の初期化
    ld      hl, #backDefault
    ld      de, #_back
    ld      bc, #BACK_LENGTH
    ldir

    ; 処理の設定
    ld      hl, #BackNull
    ld      (_back + BACK_PROC_L), hl
    xor     a
    ld      (_back + BACK_STATE), a
    
    ; レジスタの復帰
    
    ; 終了
    ret

; 背景を更新する
;
_BackUpdate::
    
    ; レジスタの保存
    
    ; 状態別の処理
    ld      hl, #10$
    push    hl
    ld      hl, (_back + BACK_PROC_L)
    jp      (hl)
;   pop     hl
10$:

    ; レジスタの復帰
    
    ; 終了
    ret

; 何もしない
;
BackNull:

    ; レジスタの保存

    ; レジスタの復帰

    ; 終了
    ret

; 背景をクリアする
;
_BackClear::

    ; レジスタの保存

    ; パターンネームのクリア
    ld      hl, #(_patternName + 0x0000)
    ld      de, #(_patternName + 0x0001)
    ld      bc, #(0x0080 - 0x0001)
    ld      (hl), #0x00
    ldir

    ; 処理の設定
    ld      hl, #BackNull
    ld      (_back + BACK_PROC_L), hl
    xor     a
    ld      (_back + BACK_STATE), a

    ; レジスタの復帰

    ; 終了
    ret

; ロゴを表示する
;
_BackLogo::

    ; レジスタの保存

    ; パターンジェネレータの転送
    ld      hl, #(_patternTable + 0x0e00)
    ld      de, #(APP_PATTERN_GENERATOR_TABLE + 0x0600)
    ld      bc, #0x0200
    call    LDIRVM
    
    ; カラーテーブルの転送
    ld      hl, #backLogoColorTable
    ld      de, #(APP_COLOR_TABLE + 0x0018)
    ld      bc, #0x0008
    call    LDIRVM

    ; パターンネームの描画
    ld      hl, #backLogoPatternName
    ld      de, #(_patternName + 0x0000)
    ld      bc, #0x0080
    ldir

    ; 処理の設定
    ld      hl, #BackNull
    ld      (_back + BACK_PROC_L), hl
    xor     a
    ld      (_back + BACK_STATE), a

    ; レジスタの復帰

    ; 終了
    ret

; 旅を表示する
;
_BackTrail::

    ; レジスタの保存

    ; 平野か山か
    ld      hl, (_value + VALUE_M_L)
    bit     #0x07, h
    jr      nz, 10$
    ld      de, #(950 + 1)
    or      a
    sbc     hl, de
    jr      nc, 20$

    ; 平野
10$:

    ; パターンジェネレータの転送
    ld      hl, #(_patternTable + 0x1000)
    ld      de, #(APP_PATTERN_GENERATOR_TABLE + 0x0600)
    ld      bc, #0x0200
    call    LDIRVM
    
    ; カラーテーブルの転送
    ld      hl, #(backTrailColorTable + 0x0000)
    ld      de, #(APP_COLOR_TABLE + 0x0018)
    ld      bc, #0x0008
    call    LDIRVM

    ; パターンネームの設定
    ld      hl, #(backTrailPatternName + 0x0000)
    ld      (_back + BACK_PATTERN_NAME_L), hl
    jr      90$

    ; 山
20$:

    ; パターンジェネレータの転送
    ld      hl, #(_patternTable + 0x1200)
    ld      de, #(APP_PATTERN_GENERATOR_TABLE + 0x0600)
    ld      bc, #0x0200
    call    LDIRVM
    
    ; カラーテーブルの転送
    ld      hl, #(backTrailColorTable + 0x0008)
    ld      de, #(APP_COLOR_TABLE + 0x0018)
    ld      bc, #0x0008
    call    LDIRVM

    ; パターンネームの設定
    ld      hl, #(backTrailPatternName + 0x0100)
    ld      (_back + BACK_PATTERN_NAME_L), hl
;   jr      90$

    ; 旅の完了
90$:

    ; 処理の設定
    ld      hl, #BackTrail
    ld      (_back + BACK_PROC_L), hl
    xor     a
    ld      (_back + BACK_STATE), a

    ; レジスタの復帰

    ; 終了
    ret

BackTrail:

    ; レジスタの保存

    ; 初期化
    ld      a, (_back + BACK_STATE)
    or      a
    jr      nz, 09$

    ; フレームの設定
    xor     a
    ld      (_back + BACK_FRAME), a

    ; 初期化の完了
    ld      hl, #(_back + BACK_STATE)
    inc     (hl)
09$:

    ; パターンネームの描画
    ld      a, (_back + BACK_FRAME)
    and     #0x1f
    jr      nz, 19$
    ld      a, (_back + BACK_FRAME)
    and     #0x20
    add     a, a
    add     a, a
    ld      e, a
    ld      d, #0x00
    ld      hl, (_back + BACK_PATTERN_NAME_L)
    add     hl, de
    ld      de, #(_patternName + 0x0000)
    ld      bc, #0x0080
    ldir
19$:

    ; スプライトの描画
    ld      a, (_back + BACK_FRAME)
    and     #0x20
    srl     a
    ld      e, a
    ld      d, #0x00
    ld      hl, #backTrailSprite
    add     hl, de
    ld      de, #_sprite
    ld      bc, #0x000c
    ldir

    ; フレームの更新
    ld      hl, #(_back + BACK_FRAME)
    inc     (hl)

    ; レジスタの復帰

    ; 終了
    ret

; 交易所を表示する
;
_BackFort::

    ; レジスタの保存

    ; パターンジェネレータの転送
    ld      hl, #(_patternTable + 0x1400)
    ld      de, #(APP_PATTERN_GENERATOR_TABLE + 0x0600)
    ld      bc, #0x0200
    call    LDIRVM
    
    ; カラーテーブルの転送
    ld      hl, #backFortColorTable
    ld      de, #(APP_COLOR_TABLE + 0x0018)
    ld      bc, #0x0008
    call    LDIRVM

    ; パターンネームの転送
    ld      hl, (_value + VALUE_M_L)
    bit     #0x07, h
    jr      nz, 10$
    ld      de, #(950 + 1)
    or      a
    sbc     hl, de
    jr      nc, 11$
10$:
    ld      hl, #(backFortPatternName + 0x0000)
    jr      12$
11$:
    ld      hl, #(backFortPatternName + 0x0080)
;   jr      12$
12$:
    ld      de, #(_patternName + 0x0000)
    ld      bc, #0x0080
    ldir

    ; 処理の設定
    ld      hl, #BackFort
    ld      (_back + BACK_PROC_L), hl
    xor     a
    ld      (_back + BACK_STATE), a

    ; レジスタの復帰

    ; 終了
    ret

BackFort:

    ; レジスタの保存

    ; 初期化
    ld      a, (_back + BACK_STATE)
    or      a
    jr      nz, 09$

    ; 初期化の完了
    ld      hl, #(_back + BACK_STATE)
    inc     (hl)
09$:

    ; スプライトの描画
    ld      hl, #backFortSprite
    ld      de, #_sprite
    ld      bc, #0x0014
    ldir

    ; レジスタの復帰

    ; 終了
    ret

; 屋外を表示する
;
_BackYard::

    ; レジスタの保存

    ; パターンジェネレータの転送
    ld      hl, #(_patternTable + 0x1400)
    ld      de, #(APP_PATTERN_GENERATOR_TABLE + 0x0600)
    ld      bc, #0x0200
    call    LDIRVM
    
    ; カラーテーブルの転送
    ld      hl, #backYardColorTable
    ld      de, #(APP_COLOR_TABLE + 0x0018)
    ld      bc, #0x0008
    call    LDIRVM

    ; パターンネームの転送
    ld      hl, (_value + VALUE_M_L)
    bit     #0x07, h
    jr      nz, 10$
    ld      de, #(950 + 1)
    or      a
    sbc     hl, de
    jr      nc, 11$
10$:
    ld      hl, #(backYardPatternName + 0x0000)
    jr      12$
11$:
    ld      hl, #(backYardPatternName + 0x0080)
;   jr      12$
12$:
    ld      de, #(_patternName + 0x0000)
    ld      bc, #0x0080
    ldir

    ; 処理の設定
    ld      hl, #BackNull
    ld      (_back + BACK_PROC_L), hl
    xor     a
    ld      (_back + BACK_STATE), a

    ; レジスタの復帰

    ; 終了
    ret

; オレゴンを表示する
;
_BackOregon::

    ; レジスタの保存

    ; パターンジェネレータの転送
    ld      hl, #(_patternTable + 0x1600)
    ld      de, #(APP_PATTERN_GENERATOR_TABLE + 0x0600)
    ld      bc, #0x0200
    call    LDIRVM
    
    ; カラーテーブルの転送
    ld      hl, #backOregonColorTable
    ld      de, #(APP_COLOR_TABLE + 0x0018)
    ld      bc, #0x0008
    call    LDIRVM

    ; パターンネームの転送
    ld      hl, #backOregonPatternName
    ld      de, #(_patternName + 0x0000)
    ld      bc, #0x0080
    ldir

    ; 処理の設定
    ld      hl, #BackOregon
    ld      (_back + BACK_PROC_L), hl
    xor     a
    ld      (_back + BACK_STATE), a

    ; レジスタの復帰

    ; 終了
    ret

BackOregon:

    ; レジスタの保存

    ; 初期化
    ld      a, (_back + BACK_STATE)
    or      a
    jr      nz, 09$

    ; 初期化の完了
    ld      hl, #(_back + BACK_STATE)
    inc     (hl)
09$:

    ; スプライトの描画
    ld      hl, #backOregonSprite
    ld      de, #_sprite
    ld      bc, #0x001c
    ldir

    ; レジスタの復帰

    ; 終了
    ret

; 定数の定義
;

; 背景の初期値
;
backDefault:

    .dw     BACK_PROC_NULL
    .db     BACK_STATE_NULL
    .db     BACK_FLAG_NULL
    .db     BACK_FRAME_NULL
    .db     BACK_COUNT_NULL
    .dw     BACK_PATTERN_NAME_NULL

; ロゴ
;
backLogoPatternName:

    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0xc0, 0xc1, 0xc2, 0xc3, 0x00, 0x00, 0x00, 0xc4, 0xc5, 0xc6, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc1, 0xfd, 0x00, 0x00, 0x00, 0x00, 0xc7, 0xc8, 0x00
    .db     0x00, 0x00, 0xc9, 0x00, 0xca, 0xcb, 0xcc, 0xcd, 0xce, 0xcf, 0xd0, 0xd1, 0xd2, 0xd3, 0xd4, 0xd5
    .db     0xd6, 0xd7, 0xd8, 0xd9, 0xda, 0xdb, 0x00, 0xc9, 0xdc, 0xdd, 0xde, 0xdf, 0xe0, 0xe1, 0xe2, 0x00
    .db     0x00, 0x00, 0xe3, 0xe4, 0xe5, 0xe6, 0xe7, 0xe8, 0xe9, 0xea, 0xeb, 0xec, 0x00, 0xed, 0xee, 0xef
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0x00, 0xe3, 0xf6, 0xf7, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0x00

backLogoColorTable:

    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK

; 旅
;
backTrailPatternName:

    ; 平野 0
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc1, 0xc2, 0xc3, 0xc4, 0xc5, 0x00
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8, 0xc6, 0xc7, 0xc8, 0xc9, 0xca, 0xcb, 0xff
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0xd1, 0xd2, 0xd3, 0xcc, 0xd8, 0xd9, 0xcd, 0xdc, 0xce, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0xd4, 0xd5, 0xd6, 0xd7, 0x00, 0xda, 0xdb, 0xdd, 0xde, 0xdf, 0x00
    ; 平野 1
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc1, 0xc2, 0xc3, 0xc4, 0xc5, 0x00
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8, 0xc6, 0xc7, 0xc8, 0xc9, 0xca, 0xcb, 0xff
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xe1, 0xe2, 0xe3, 0xcc, 0xe8, 0xe9, 0xcd, 0xec, 0xce, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0xe4, 0xe5, 0xe6, 0xe7, 0x00, 0xea, 0xeb, 0xed, 0xee, 0xef, 0x00
    ; 山 0
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf0, 0xc0, 0xc1, 0xc2, 0xc3, 0xc4, 0xc5, 0xf7
    .db     0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff
    .db     0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff, 0xf8, 0xc6, 0xc7, 0xc8, 0xc9, 0xca, 0xcb, 0xff
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0xd1, 0xd2, 0xd3, 0xcc, 0xd8, 0xd9, 0xcd, 0xdc, 0xce, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0xd4, 0xd5, 0xd6, 0xd7, 0x00, 0xda, 0xdb, 0xdd, 0xde, 0xdf, 0x00
    ; 山 1
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf0, 0xc0, 0xc1, 0xc2, 0xc3, 0xc4, 0xc5, 0xf7
    .db     0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff
    .db     0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff, 0xf8, 0xc6, 0xc7, 0xc8, 0xc9, 0xca, 0xcb, 0xff
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xe1, 0xe2, 0xe3, 0xcc, 0xe8, 0xe9, 0xcd, 0xec, 0xce, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0xe4, 0xe5, 0xe6, 0xe7, 0x00, 0xea, 0xeb, 0xed, 0xee, 0xef, 0x00

backTrailSprite:

    ; 0
    .db     0x10 - 0x01, 0xb0, 0x10, VDP_COLOR_LIGHT_RED
    .db     0x10 - 0x01, 0xc4, 0x14, VDP_COLOR_LIGHT_RED
    .db     0x10 - 0x01, 0xd8, 0x18, VDP_COLOR_LIGHT_RED
    .db     0x00 - 0x01, 0x00, 0x00, VDP_COLOR_TRANSPARENT
    ; 1
    .db     0x11 - 0x01, 0xb0, 0x10, VDP_COLOR_LIGHT_RED
    .db     0x10 - 0x01, 0xc4, 0x14, VDP_COLOR_LIGHT_RED
    .db     0x10 - 0x01, 0xd8, 0x18, VDP_COLOR_LIGHT_RED
    .db     0x00 - 0x01, 0x00, 0x00, VDP_COLOR_TRANSPARENT

backTrailColorTable:

    ; 平野
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_MEDIUM_GREEN << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_MEDIUM_GREEN << 4) | VDP_COLOR_BLACK
    ; 山
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_MAGENTA      << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_MAGENTA      << 4) | VDP_COLOR_BLACK

; 交易所
;
backFortPatternName:

    ; 平野
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0xe0, 0xe1, 0xe2, 0xe3, 0xe4, 0xe5, 0xe6, 0xe7, 0xe8, 0xe9, 0xea, 0xeb, 0xec, 0xed, 0xee, 0xef
    .db     0xe0, 0xe1, 0xe2, 0xe3, 0xe4, 0xe5, 0xe6, 0xe7, 0xe8, 0xe9, 0xea, 0xeb, 0xec, 0xed, 0xee, 0xef
    .db     0x00, 0x00, 0xc0, 0xc1, 0xc2, 0xc3, 0xc4, 0xc5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0xc6, 0xc7, 0xc8, 0xc9, 0xca, 0xcb, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    ; 山
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7
    .db     0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff
    .db     0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff
    .db     0x00, 0x00, 0xc0, 0xc1, 0xc2, 0xc3, 0xc4, 0xc5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0xc6, 0xc7, 0xc8, 0xc9, 0xca, 0xcb, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

backFortSprite:

    .db     0x00 - 0x01, 0x20, 0x20, VDP_COLOR_LIGHT_RED
    .db     0x00 - 0x01, 0x20, 0x24, VDP_COLOR_LIGHT_BLUE
    .db     0x00 - 0x01, 0x20, 0x28, VDP_COLOR_WHITE
    .db     0x10 - 0x01, 0x20, 0x2c, VDP_COLOR_WHITE
    .db     0x10 - 0x01, 0x30, 0x30, VDP_COLOR_WHITE

backFortColorTable:

    .db     (VDP_COLOR_LIGHT_RED    << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_LIGHT_RED    << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_MEDIUM_GREEN << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_MEDIUM_GREEN << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_MAGENTA      << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_MAGENTA      << 4) | VDP_COLOR_BLACK

; 屋外
;
backYardPatternName:

    ; 平野
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0xe0, 0xe1, 0xe2, 0xe3, 0xe4, 0xe5, 0xe6, 0xe7, 0xe8, 0xe9, 0xea, 0xeb, 0xec, 0xed, 0xee, 0xef
    .db     0xe0, 0xe1, 0xe2, 0xe3, 0xe4, 0xe5, 0xe6, 0xe7, 0xe8, 0xe9, 0xea, 0xeb, 0xec, 0xed, 0xee, 0xef
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    ; 山
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7
    .db     0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff
    .db     0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

backYardColorTable:

    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_MEDIUM_GREEN << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_MEDIUM_GREEN << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_MAGENTA      << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_MAGENTA      << 4) | VDP_COLOR_BLACK

; オレゴン
;
backOregonPatternName:

    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff
    .db     0xf0, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8, 0xf9, 0xfa, 0xfb, 0xfc, 0xfd, 0xfe, 0xff
    .db     0x00, 0x00, 0xc0, 0xc1, 0xc2, 0xc3, 0xc4, 0xc5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0xc8, 0xc9, 0xca, 0xcb, 0xcc, 0xcd, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    .db     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

backOregonSprite:

    .db     0x80 - 0x01, 0x28, 0x40, VDP_COLOR_LIGHT_RED
    .db     0x08 - 0x01, 0x28, 0x44, VDP_COLOR_LIGHT_BLUE
    .db     0x08 - 0x01, 0x28, 0x48, VDP_COLOR_WHITE
    .db     0x18 - 0x01, 0x20, 0x4c, VDP_COLOR_LIGHT_RED
    .db     0x18 - 0x01, 0x10, 0x50, VDP_COLOR_LIGHT_BLUE
    .db     0x18 - 0x01, 0x20, 0x54, VDP_COLOR_LIGHT_BLUE
    .db     0x18 - 0x01, 0x30, 0x58, VDP_COLOR_LIGHT_BLUE

backOregonColorTable:

    .db     (VDP_COLOR_LIGHT_RED    << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_WHITE        << 4) | VDP_COLOR_BLACK
    .db     (VDP_COLOR_MEDIUM_GREEN << 4) | VDP_COLOR_BLACK,       (VDP_COLOR_MEDIUM_GREEN << 4) | VDP_COLOR_BLACK


; DATA 領域
;
    .area   _DATA

; 変数の定義
;

; 背景
;
_back::

    .ds     BACK_LENGTH

